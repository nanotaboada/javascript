<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">
        <title>EmberJS Sample: Binding</title>
        <link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" />
        <link rel="shortcut icon" href="http://emberjs.com/images/favicon.png" />
        <style>
            /* Arbitrary styles accommodating the display to fit a Single Page App format */
            .jumbotron {
                padding-top: 18px;
                padding-bottom: 18px;
            }
        </style>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/handlebars.js/1.3.0/handlebars.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/ember.js/1.5.0/ember.debug.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/ember-data.js/1.0.0-beta.7/ember-data.min.js"></script>
        <script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
        <script src="http://cdnjs.cloudflare.com/ajax/libs/moment.js/2.5.1/moment.min.js"></script>
        <script>
            /* Application
            ----------------------------------------------------------------- */
            window.Bookshelf = Ember.Application.create();
            Bookshelf.ApplicationAdapter = DS.RESTAdapter.extend({
                host: 'http://cloud.nanotaboada.com.ar'
            });

            /* Routes
            ----------------------------------------------------------------- */
            Bookshelf.Router.map(function() {
                this.resource('books', { path: '/' }); // data-template-name
            });

            Bookshelf.BooksRoute = Ember.Route.extend({
                model: function () {
                    return this.store.find('book');
                }
            });

            /* View
            ----------------------------------------------------------------- */
            Ember.Handlebars.registerBoundHelper('formatDate', function(date) {
              return moment(date).format('L');
            });

            /* Model
            ----------------------------------------------------------------- */
            Bookshelf.Book = DS.Model.extend({
                isbn : DS.attr('string'),
                title : DS.attr('string'),
                author : DS.attr('string'),
                published : DS.attr('date'),
                publisher : DS.attr('string'),
                pages : DS.attr('number'),
                description : DS.attr('string'),
                instock : DS.attr('boolean', {defaultValue: true})
            });
        </script>
    </head>
    <body>
        <script type="text/x-handlebars" data-template-name="books">
            <div class="container">
                <div class="row text-center">
                    <div class="col-md-12">
                        <div class="jumbotron">
                        <img src="http://www.gravatar.com/avatar/0cf15665a9146ba852bf042b0652780a?s=112" alt="EmberJS Logo" />
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12 text-center">
                        <table class="table table-hover text-left">
                            <thead>
                                <tr>
                                    <th>ISBN</th>
                                    <th>Title</th>
                                    <th>Author</th>
                                    <th>Published</th>
                                    <th>Publisher</th>
                                    <th>Pages</th>
                                </tr>
                            </thead>
                            <tbody>
                                {{#each}}
                                <tr>
                                    <td>{{isbn}}</td>
                                    <td>{{title}}</td>
                                    <td>{{author}}</td>
                                    <td>{{formatDate published}}</td>
                                    <td>{{publisher}}</td>
                                    <td>{{pages}}</td>
                                </tr>
                                {{/each}}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </script>
    </body>
</html>
